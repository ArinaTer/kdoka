#!/bin/bash

# ะกะบัะธะฟั ะดะปั ะดะตะฟะปะพั ัะพะฑัะฐะฝะฝะพะน ะฒะตััะธะธ ะฝะฐ ะฒะตัะบั main

echo "๐ ะะฐัะธะฝะฐะตะผ ะดะตะฟะปะพะน..."

# ะะตัะตะบะปััะฐะตะผัั ะฝะฐ ะฒะตัะบั dev
git checkout dev

# ะกะพะฑะธัะฐะตะผ ะฟัะพะตะบั
echo "๐ฆ ะกะพะฑะธัะฐะตะผ ะฟัะพะตะบั..."
npm run build

# ะะตัะตะบะปััะฐะตะผัั ะฝะฐ ะฒะตัะบั main
git checkout main

# ะฃะดะฐะปัะตะผ ััะฐััะต ัะฐะนะปั
echo "๐๏ธ ะฃะดะฐะปัะตะผ ััะฐััะต ัะฐะนะปั..."
git rm -rf dist/ 2>/dev/null || true

# ะะพะฑะฐะฒะปัะตะผ ะฝะพะฒัะต ัะพะฑัะฐะฝะฝัะต ัะฐะนะปั
echo "๐ ะะพะฑะฐะฒะปัะตะผ ะฝะพะฒัะต ัะฐะนะปั..."
git add -f dist/

# ะกะพะทะดะฐะตะผ ะบะพะผะผะธั
echo "๐พ ะกะพะทะดะฐะตะผ ะบะพะผะผะธั..."
git commit -m "Update production build - $(date)"

echo "โ ะะตะฟะปะพะน ะทะฐะฒะตััะตะฝ!"
echo "๐ ะขะตะบััะฐั ะฒะตัะบะฐ: $(git branch --show-current)"
echo "๐ ะคะฐะนะปั ะฒ dist/:"
ls -la dist/
